language: java
jdk:
- oraclejdk8
cache:
  directories:
  - "$HOME/.gradle"
jobs:
  include:
    - stage: build
      if: tag IS blank
      install: skip
      before_script: openssl aes-256-cbc -K $encrypted_25e25e985c51_key -iv $encrypted_25e25e985c51_iv -in secring.gpg.enc -out secring.gpg -d
      script: ./gradlew clean build

    - stage: deploy
      if: tag =~ ^\d+\.\d+\.\d+$
      install: skip
      before_script: openssl aes-256-cbc -K $encrypted_25e25e985c51_key -iv $encrypted_25e25e985c51_iv -in secring.gpg.enc -out secring.gpg -d
      script: ./gradlew clean build uploadArchives
env:
  global:
  - signingSecretKeyRingFile="`pwd`/secring.gpg"
  - secure: "fmV8e13ksB9MpuwGAmYFnCSiuOK7NDlTQ5KuwWWAtSIsI7oljvGqX/3EWg7SGF0pqXuo6ljACDIaY1aUtAZMhq75fyk2kBYxLhcFfZaad5gCXMOiM09gouCZnF4M3hGeN79ITQ31WqNVyJonJAotBGt4bNY7hRwGwXBAJcvHyzLKkHEXkvHksBjz8+mXCWCR+aoNYfIgDziQO1brkRY0XrO5AoXqVBAi/F2tZxtErs62lAJQsfm+sW3aF9PCXcbdXZAM3wFvY73gDtHulWKEQ0V9hSzcaiwo4tR6pb90IaH8NjixlqE0Ba0SgXpSYTq5iHWPOZUGWPMpQYMyF78jgeqatBAxbPpVx6mYggOFRUMkxyf+pboOoC1KH5dRxKar6QSMXYlxos1Xuaai4CIm/pd3YdX+urWri7cCAejjyg9GXtWZpVP5XI9s330r4aCpz1tk85Jfe1vw2TY6zo/Qkkc2oxTWk/23nOAtW7MccVRzydwTAQeiKjkOZCQE1vqODov31xkw7Zh39nk1r3Sq7rkXqFQKguSK0zkzWmKPnezUpg/AJ9YybWg61V9KQNMrUTirGQ1VvWamvJjBvi4Ls8SKza237/fKC4Svftb/5HuDn4ud/539dO5fR7/gww35ZeZWz60Un3sXyR33ra4jc4JnVWcmHK+IsxmuLSzqh44="
  - secure: "U7bn05Zq01bvQAg5eedMEuawJRsx6rE26TtzhYxv8Wl6EDAjbsZMWv9sMI0NET5oYTc3IOG7A4DnTmhY39Yif+0jYBNsliA74fv5QRJQfnmOMzBR7qDyiRbXa7rsobnpL7sXHnEEN/wXwr7T0rMd3rTc2siiSjQnHq2SFVTqovJ5wJApvHDc6yv0KcLD2ybVyUQ0GICELgUegbfIIyvoWdiEToZUNyfl9X0ocJz6T10/mTtP4feFqhq0Umk2E2emJI5D+08WMjnMit2hlaoEjrKoOepHcVwUxmARwZx2I2Snv4JNoILKvTrE4hnOzY29PMaOJ2mGSFC+8d9Or77XNenXBr6i+9Uics59qAp38Cmtj1hZgQvDL9UAXHncG1GtBPVxa9onpBEoJSmMKPUDm8lM6fcCgcrWAYnO3q+UKaa3VhIjCoU8jwa4rP4exYCaHNtg4lgdVXIM+XTJvw6QKySg2YRpR1/nfv03dlSHEbp+L+axNfZBqY69jLQRGW/xQgK+ZvCUO2jssdJesEuZWwK33MRYbng6fb5FVyFYZcnRjjZZNog5wnt1GITIVlfJPvuUR/NPP6Pj3l0jkpjX3iJh5YiMzUmzn6PLghPipz62ZVA1KmRFaWe8ZcDEL3GZYRrERcpwLJLX9sYxopVnPKS3zOMeLE/CEdjWoPUzWXs="
  - secure: "Y0caZcWNYnXYyFOhBWPCY3p0AmDj5yu12oZpsawJQ2zGqHRiiJ0cOezeUKZr6ftgCRbdvymTBawXLwnSWK7JcA4D05fWXfTDWykF67k+poJXMd19VwMFLxT1giGZ67u0DaQix+r2qflVGVLDCE0C+Sk35owr5uSyS7axLul4NCgJGiNtyy+Yq3kVVS2AIR3/jjNbp3w0/Ta5NZpyGCfV9wGYaeWymnr1BxAiXj+S5KJ1npmTzwQJESeM2HyJ38RM2vosisNwh2gF86yUvfFwieAgBgNccAtCZ2JUH7VYjYp18x/oxlj/JYLgrfFTwSRbDTaT3AE/4moM4gG6Uw6wjHCmXtslNe6bFE5gVPZh3WBm/USTfr5re2u+DOpAjMp2zh3ddu3SbaaB/I3CwbtGebDb361rRXqpSOOseJeCkekhtc8gf3P4clecJjL4NOty9Vr70COopM6/uY7UDafZkmbKIylYyrQtZ3XiPG7gGgofeLCwhgXv09cs8ymf0R6rhQAy6iaOe/QBbtqW8qqeqMTL3hvE3sU3cKt2KfkNzgJc2qhd2RExa6B5BwQziXy09m/nY7rr9grB9r7UlDcdF4/4XOGw9RtaZzMiynAAIWr18ZI1mYaMJ9QZytpifPUF4zAA3OGMJ1otGy1423btqAARH+D6xMY/2ebPrQATBJ8="
  - secure: "l4Q7FQKqSydGMo8N0AIblxDsQ5zeESXYVTvrpv7M5Cw4hMq0Wd7w4aEE30wvRLspTzGTmXBkFyTBmn897VsY/TvwxNhb2PteX5QDwt7A6wdRtbzLIXhgR/leXgu9ZrTBESVAYNhgdYSUb/ZIm7oOwhPEWct1+nC4z1rbRVFVkRwhgRILTarx0bto/ZiKGh54k7rD8iUl/QMALd5u/lyxtiR0xVGOeBshVhlt3Kp9NT0lXaQQnjGtPwMBpKOEjwdOD0n9tmXos6t2fMg+4ObpciqW3G778+8EjlIaLC8Xns9cNapkv4uXY8ubgrD7/VtgalQBfCQqplVb0Jqw31dQiSd/LXWfOAXkAfyWeqvm5mFtL17aCJRBSATUducWadsExv4E5RWEDYXZd/x5jr9eNW3Vr1gGD9Mgd8qQ6CHkGAI+y1tvInFQ6//ZZsHjGHIxO9f2wm6ofPRt81dZvKb1C13E3b+jryW5gavO2fTdDbHkDcV4dhLOgD5sdgVSyIkjD4FIzzLsB4tbev8O+5q5Nf3FLG8DulidkPyPLzqOdrQV6XYNrO4AnNFjjol57FvL6CKbBG1ZpY2TPLpSbrz/lq1I5YLVeQnT1sXaDrmWJPV6CMnhxZq6/JyphfWdp1zwiADlE+mhfx0SLJENTWHcUhu/P9KICwGeyWvh7oQaqoA="
  - secure: "g9MjUgs2Q6pWDN/falMdCZdeubzNXEjpNyPrW6g3h9iaZiJrlh8WsGBgnnO7vc/q2Fu4Tw15xzWW2w+kaiG6/sNZ22frS/QcbMx/ngcieMO6sgm8Ol9S/okFtGKnVquBOrORa2qMugQzBFCHS44o8WdYQnWOH8cgHCr1YHtQej77VyN4MRFABKgPd+dmC51sBzZjz3lC8PP/53HyN3tH8clQfyCpBqLvFjgvPwEXbLY833g+DwgBxoSh7vQVzYDtv7zczw4or9JTf72y6i04eYnQiaPVy/+PsnG4Wcq5af0SRA1xUMqd67B/QAbpKk7X0LjQJaM0W1pFAisZVOsQXhNkNjKgQGP9gUWgLnhTps7UX86cG2XqxoYXp69PhQe94SXS61AbUJW+4TGBrso6HzJvfsop2tWzlZaYCB7ISbEby6bi/MMzejT+xg3xGmp1g4tBFde48zWcUMrCReQo/zk7eFQ1gSDMENqKMp4182oJxSTJr36uC7oNl3+Y6ZRUXWN6RklcSGMP5jDUgalHwUdKBZJd0+k2i/rSOqv+65XW+eI9gzfeqHKnKnS3/jU/pFVf6+MFGG7nS5l9g33R1miYJiIFnazatH5dPGeOwbEWXl5Z2ETVKExNqyM4jnpvA4kIM10lr1aDDo0p17uoyrsOW+L9+L26YNUK4r36+K4="
